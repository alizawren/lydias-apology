<!doctype html>
<html>

  <head>
    <meta charset="utf-8">
    <title>Hello World</title>
  </head>
  <style>
    * {
      padding: 0;
      margin: 0;
    }
  </style>
  <script src="pixi.min.js"></script>

  <body>
    <script type="text/javascript">
      let type = "WebGL"
        if (!PIXI.utils.isWebGLSupported()) {
          type = "canvas"
        }

        PIXI
          .utils
          .sayHello(type)

        //Aliases
        let Application = PIXI.Application,
          loader = PIXI.Loader.shared,
          resources = PIXI.Loader.shared.resources,
          Sprite = PIXI.Sprite,
          Interaction = PIXI.interaction.InteractionManager;

        //Create a Pixi Application
        let app = new Application({
          width: 256,
          height: 256,
          antialias: true,
          transparent: false,
          resolution: 1,
          interactive: true
        });

        app.renderer.view.style.position = "absolute";
        app.renderer.view.style.display = "block";
        app.renderer.autoDensity = true;
        app
          .renderer
          .resize(window.innerWidth, window.innerHeight);

        window.addEventListener("resize", function () {
          app.renderer.autoDensity = true;
          app
            .renderer
            .resize(window.innerWidth, window.innerHeight);
        })

        //Add the canvas that Pixi automatically created for you to the HTML document
        document
          .body
          .appendChild(app.view);

        //load an image and run the `setup` function when it's done
        loader
          .add("img/room.png")
          .on("progress", loadProgressHandler)
          .load(setup);

        let bg;

        function loadProgressHandler(loader, resource) {

          //Display the file `url` currently being loaded
          console.log("loading: " + resource.url);

          //Display the percentage of files currently loaded
          console.log("progress: " + loader.progress + "%");

          //If you gave your files names as the first argument
          //of the `add` method, you can access them like this
          //console.log("loading: " + resource.name);
        }

        //This `setup` function will run when the image has loaded
        function setup() {

          //Create the cat sprite
          bg = new Sprite(resources["img/room.png"].texture);

          //Add the cat to the stage
          app
            .stage
            .addChild(bg);

          bg.x = 0;
          bg.y = 0;

          app
            .ticker
            .add(delta => gameLoop(delta));
        }

        let smoothSpeed = 0.1

        function gameLoop(delta) {
          let canvasX = window.innerWidth;
          let canvasY = window.innerHeight;

          let mousex = app.renderer.plugins.interaction.mouse.global.x;
          let mousey = app.renderer.plugins.interaction.mouse.global.y;
          let desiredx = canvasX / 2 - mousex;
          let desiredy = canvasY / 2 - mousey;
          let smoothx = (1 - smoothSpeed) * bg.x + smoothSpeed * desiredx;
          let smoothy = (1 - smoothSpeed) * bg.y + smoothSpeed * desiredy;
          bg.x = smoothx;
          bg.y = smoothy;

          console.log(bg.x, bg.y)
          //   app.stage.
        }
    </script>
  </body>

</html>